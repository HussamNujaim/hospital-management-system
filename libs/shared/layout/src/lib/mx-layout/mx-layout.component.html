<div class="app-root">
  <!-- Syncfusion Sidebar with built-in responsive behavior -->
  <ejs-sidebar
    #sidebar
    [type]="sidebarType"
    [enableDock]="true"
    [dockSize]="dockSize"
    [width]="sidebarWidth"
    [mediaQuery]="mediaQuery"
    [target]="'.app-root'"
    [closeOnDocumentClick]="closeOnDocumentClick"
    (created)="onSidebarCreated()"
    (close)="onSidebarClose()"
    (open)="onSidebarOpen()"
  >
    <!-- Sidebar Content -->
    <div class="sidebar-wrapper" [class.sidebar-docked]="isDocked">
      <!-- Brand/Logo Area -->
      <div class="sidebar-brand">
        <span class="brand-text" *ngIf="!isDocked">HMS</span>
        <span class="brand-icon" *ngIf="isDocked">H</span>
      </div>

      <!-- Navigation Content -->
      <div class="sidebar-content">
        <nav class="sidebar-nav">
          <ul class="nav-list">
            <ng-container *ngFor="let item of navItems">
              <!-- Nav item without children -->
              <li class="nav-item" *ngIf="!item.children || item.children.length === 0">
                <a
                  [routerLink]="item.route"
                  routerLinkActive="active"
                  class="nav-link"
                  [class.nav-link-docked]="isDocked"
                  (click)="onSidebarItemClick(item)"
                  [title]="isDocked ? item.label : ''"
                >
                  <i *ngIf="item.icon" [class]="item.icon" class="nav-icon"></i>
                  <span class="nav-label" *ngIf="!isDocked">{{ item.label }}</span>
                </a>
              </li>
              <!-- Nav item with children -->
              <li class="nav-item nav-item-has-children"
                  *ngIf="item.children && item.children.length > 0"
                  [class.expanded]="isExpanded(item.id) && !isDocked">

                <!-- When docked: show only parent icon (no submenu) -->
                <a *ngIf="isDocked"
                   [routerLink]="item.route || item.children[0]?.route"
                   routerLinkActive="active"
                   class="nav-link nav-link-docked"
                   [title]="item.label"
                >
                  <i *ngIf="item.icon" [class]="item.icon" class="nav-icon"></i>
                </a>

                <!-- When expanded: show parent with children -->
                <ng-container *ngIf="!isDocked">
                  <div class="nav-link nav-parent" (click)="toggleSubmenu(item, $event)">
                    <i *ngIf="item.icon" [class]="item.icon" class="nav-icon"></i>
                    <span class="nav-label">{{ item.label }}</span>
                    <i class="nav-chevron e-icons"
                       [class.e-chevron-down]="!isExpanded(item.id)"
                       [class.e-chevron-up]="isExpanded(item.id)"></i>
                  </div>
                  <ul class="nav-submenu" [class.submenu-expanded]="isExpanded(item.id)">
                    <li class="nav-item" *ngFor="let child of item.children">
                      <a [routerLink]="child.route"
                         routerLinkActive="active"
                         class="nav-link nav-link-child"
                         (click)="onSidebarItemClick(child)">
                        <i *ngIf="child.icon" [class]="child.icon" class="nav-icon"></i>
                        <span class="nav-label">{{ child.label }}</span>
                      </a>
                    </li>
                  </ul>
                </ng-container>
              </li>
            </ng-container>
          </ul>
        </nav>
      </div>
    </div>
  </ejs-sidebar>

  <!-- Content Wrapper (Right Side) -->
  <div class="content-wrapper">
    <!-- Header -->
    <mx-topbar
      [title]="title"
      [userInfo]="userInfo"
      (menuToggle)="onMenuToggle()"
    >
      <!-- Optional: Add custom actions via content projection -->
      <div topbar-actions>
        <!-- Future: Notifications, user dropdown, etc. -->
      </div>
    </mx-topbar>

    <!-- Main Content Area -->
    <main class="main-content">
      <ng-content></ng-content>
    </main>
  </div>
</div>

