<div class="app-root">
  <!-- Custom Backdrop for Mobile -->
  <div class="sidebar-backdrop"
       *ngIf="isSidebarOpen && isMobile"
       (click)="closeSidebar()"></div>

  <!-- Syncfusion Sidebar with built-in responsive behavior -->
  <ejs-sidebar
    #sidebar
    [type]="sidebarType"
    [enableDock]="true"
    [dockSize]="dockSize"
    [width]="sidebarWidth"
    [mediaQuery]="mediaQuery"
    [target]="'.app-root'"
    [closeOnDocumentClick]="closeOnDocumentClick"
    (created)="onSidebarCreated()"
    (close)="onSidebarClose()"
    (open)="onSidebarOpen()"
  >
    <!-- Sidebar Content -->
    <div class="sidebar-wrapper">
      <!-- Brand/Logo Area -->
      <div class="sidebar-brand">
        <span class="brand-text">HMS</span>
      </div>

      <!-- Navigation Content -->
      <div class="sidebar-content">
        <nav class="sidebar-nav">
          <ul class="nav-list">
            <ng-container *ngFor="let item of navItems">
              <li class="nav-item" *ngIf="!item.children || item.children.length === 0">
                <a
                  [routerLink]="item.route"
                  routerLinkActive="active"
                  class="nav-link"
                  (click)="onSidebarItemClick(item)"
                  [title]="item.label"
                >
                  <i *ngIf="item.icon" [class]="item.icon" class="nav-icon"></i>
                  <span class="nav-label">{{ item.label }}</span>
                </a>
              </li>
              <li class="nav-item nav-item-has-children" *ngIf="item.children && item.children.length > 0">
                <div class="nav-link nav-parent">
                  <i *ngIf="item.icon" [class]="item.icon" class="nav-icon"></i>
                  <span class="nav-label">{{ item.label }}</span>
                </div>
                <ul class="nav-submenu">
                  <li class="nav-item" *ngFor="let child of item.children">
                    <a
                      [routerLink]="child.route"
                      routerLinkActive="active"
                      class="nav-link nav-link-child"
                      (click)="onSidebarItemClick(child)"
                    >
                      <i *ngIf="child.icon" [class]="child.icon" class="nav-icon"></i>
                      <span class="nav-label">{{ child.label }}</span>
                    </a>
                  </li>
                </ul>
              </li>
            </ng-container>
          </ul>
        </nav>
      </div>
    </div>
  </ejs-sidebar>

  <!-- Content Wrapper (Right Side) -->
  <div class="content-wrapper">
    <!-- Header -->
    <mx-topbar
      [title]="title"
      [userInfo]="userInfo"
      (menuToggle)="onMenuToggle()"
    >
      <!-- Optional: Add custom actions via content projection -->
      <div topbar-actions>
        <!-- Future: Notifications, user dropdown, etc. -->
      </div>
    </mx-topbar>

    <!-- Main Content Area -->
    <main class="main-content">
      <ng-content></ng-content>
    </main>
  </div>
</div>

