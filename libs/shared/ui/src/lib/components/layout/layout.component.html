<div [class.dark]="isDarkMode()">
  <div class="flex h-screen bg-slate-50 dark:bg-slate-950 overflow-hidden font-sans text-slate-900 dark:text-slate-100 transition-colors duration-300">

    <!-- Sidebar -->
    <hms-sidebar
      [navItems]="navItems()"
      [isCollapsed]="isSidebarCollapsed()"
      [activePageId]="activePageId()"
      [userName]="userName()"
      [userRole]="userRole()"
      [userAvatar]="userAvatar()"
      (pageChange)="pageChange.emit($event)"
    />

    <!-- Main Content Wrapper -->
    <main class="flex-1 flex flex-col overflow-hidden relative">

      <!-- Header -->
      <header class="h-20 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between px-8 z-10 shrink-0 transition-colors">
        <div class="flex items-center gap-6">
          <!-- Toggle Button -->
          <button
            (click)="sidebarToggle.emit()"
            type="button"
            class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 transition-all border border-slate-200 dark:border-slate-700 cursor-pointer shadow-sm active:scale-90"
            aria-label="Toggle Sidebar"
          >
            <svg xmlns="http://www.w3.org/2000/svg" [class]="'h-5 w-5 transition-transform duration-500 ' + (isSidebarCollapsed() ? 'rotate-180' : '')" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
            </svg>
          </button>

          <div class="flex flex-col">
            <h1 class="text-xl font-black text-slate-800 dark:text-white leading-none">{{ pageTitle() }}</h1>
            <p class="text-[10px] font-bold text-slate-400 uppercase mt-1 tracking-widest hidden sm:block">{{ subtitle() }}</p>
          </div>
        </div>

        <div class="flex items-center gap-4">
          <!-- Language Selector -->
          <hms-language-selector />

          <!-- Dark Mode Toggle -->
          <hms-theme-toggle
            [isDarkMode]="isDarkMode()"
            (toggle)="themeToggle.emit($event)"
          />

          <div class="h-8 w-[1px] bg-slate-200 dark:bg-slate-800 mx-2"></div>

          <!-- Search Bar -->
          <div class="relative hidden lg:block">
            <input
              type="text"
              [placeholder]="searchPlaceholder()"
              class="bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 border rounded-xl py-2.5 pl-10 pr-4 w-64 text-sm focus:ring-2 focus:ring-indigo-500 transition-all dark:text-white"
            />
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-slate-400 absolute left-3 top-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </div>
        </div>
      </header>

      <!-- Content Area with custom scrollbar -->
      <div class="flex-1 overflow-y-auto p-4 md:p-8 space-y-8 custom-scrollbar bg-slate-50 dark:bg-slate-950 transition-colors">
        <ng-content></ng-content>
      </div>
    </main>
  </div>
</div>

